?dict <dictloc>
delete record parts.
delete record orders.
delete record supplier.
delete record fromsup.
delete record odetail.
delete record customer.
delete def add-customer-reply.
delete def add-customer.
delete def error-reply.
delete def customerInfoReply.
delete def customerInfoRequest.
delete def orderDetailReply.
delete def orderDetailRequest.
delete def orderInfoRequest.
delete def orderInfoReply.
delete def partsInfo.
delete def orderinfo.
delete def custinfo.
delete def custnum.
delete def suppnum.
delete def partnum.
delete def ordernum.
delete def request-code.
delete def reply-code.
delete def custname.
delete def partname.
delete def suppname.
delete def addr.
delete def mdy-date.
delete def suppinfo.
delete def custinfo.
delete def getPartInfo.
delete def getPartInfoReply.
delete def updatePartInfo.

DEFINITION custnum TYPE BINARY 32.

DEFINITION suppnum TYPE BINARY 32.

DEFINITION partnum TYPE BINARY 32.

DEFINITION ordernum TYPE BINARY 32.

DEFINITION zip-cd PIC 9(5).

DEFINITION request-code TYPE BINARY 32.

DEFINITION reply-code TYPE BINARY 32.

DEFINITION custname PIC X(30).

DEFINITION partname PIC X(20).

DEFINITION suppname PIC X(20).

DEFINITION addr.
02 address PIC X(22).
02 city PIC X(14).
02 state PIC X(2).
02 zip TYPE zip-cd.
END

DEFINITION mdy-date. 
02 month PIC 99.
02 day-of-month PIC 99.
02 year PIC 99.
END

DEFINITION partsinfo.
02 partnum TYPE *.
02 partname TYPE *.
02 inventory PIC 9(3)S.
02 location PIC X(3).
02 price PIC 9(6)V9(2).
END 

* Definition for SUPPLIER Record
DEFINITION suppinfo.
02 suppnum TYPE *.
02 suppname TYPE *.
END


DEFINITION custinfo.
02 custnum TYPE *.
02 custname TYPE *.
02 addr TYPE *.
END

* Definition for ORDERS Record
DEFINITION orderinfo.
02 ordernum TYPE *.
02 orderdate TYPE mdy-date.
02 deldate TYPE mdy-date.
02 custnum TYPE *.
END

RECORD customer.
FILE IS "customer" KEY-SEQUENCED
AUDIT
MAXEXTENTS 100.
DEFINITION IS custinfo.
KEY IS customer.custnum DUPLICATES NOT ALLOWED.
KEY "cn" IS customer.custname.
END

* Contains order information for each order
RECORD orders.
FILE IS "orders" KEY-SEQUENCED
AUDIT
MAXEXTENTS 100.
DEFINITION IS orderinfo.
KEY IS orders.ordernum DUPLICATES NOT ALLOWED.
KEY "cn" IS orders.custnum.
END

* Contains each order line for each order
RECORD odetail.
FILE IS "odetail" KEY-SEQUENCED
AUDIT
MAXEXTENTS 100.
02 primkey.
03 ordernum TYPE *.
03 partnum TYPE *.
02 quantity PIC 9(3).
KEY IS primkey DUPLICATES NOT ALLOWED.
END

* Contains information on each part
RECORD parts.
FILE IS "parts" KEY-SEQUENCED
AUDIT
MAXEXTENTS 100.
DEFINITION IS partsinfo.
KEY IS parts.partnum DUPLICATES NOT ALLOWED.
KEY "pn" IS parts.partname.
END

* Contains a record of each part ordered from each supplier
RECORD fromsup.
FILE IS "fromsup" KEY-SEQUENCED
AUDIT
MAXEXTENTS 100.
02 primkey.
03 partnum TYPE *.
03 suppnum TYPE *.
02 partcost PIC 9(6)V9(2).
KEY IS primkey DUPLICATES NOT ALLOWED.
END

* Contains information about each supplier of parts
RECORD supplier.
FILE IS "supplier" KEY-SEQUENCED
AUDIT
MAXEXTENTS 100.
DEFINITION IS suppinfo.
KEY IS supplier.suppnum DUPLICATES NOT ALLOWED.
KEY "su" IS supplier.suppname.
END

* Requests information about an order
DEFINITION orderInfoRequest.
02 request-code TYPE *.
02 ordernum TYPE *.
02 custnum TYPE *.
END
* Reply to an orderInfoRequest
DEFINITION orderInfoReply.
02 reply-code TYPE *.
02 ordernum TYPE *.
02 custnum  TYPE *.
02 custname TYPE custname.
02 order-date TYPE mdy-date.
02 del-date   TYPE mdy-date.
END

DEFINITION orderDetailRequest.
02 request-code TYPE *.
02 ordernum TYPE *.
END

DEFINITION orderDetailReply.
02 reply-code TYPE *.
02 numDetails TYPE BINARY 16.
02 order-details occurs 1 to 10 times depending on numDetails.
03 item-name TYPE partname.
03 quantity-ordered PIC 9(3).
03 item-price PIC 9(6)V9(2).
END


DEFINITION customerInfoRequest.
02 request-code TYPE *.
02 starting-custnum Type BINARY 32.
02 num-customers-requested TYPE BINARY 16.
END

DEFINITION customerInfoReply.
02 reply-code TYPE *.
02 num-customers TYPE BINARY 16.
02 customers occurs 1 to 300 times depending on num-customers.
03 custnum  TYPE *.
03 custname TYPE custname.
03 addr TYPE *.
END

DEFINITION error-reply.
02 reply-code TYPE *.
02 error-number TYPE BINARY 16.
02 msg PIC X(600).
end

DEFINITION add-customer.
02 request-code TYPE *.
02 custinfo TYPE *.
end

DEFINITION add-customer-reply.
02 reply-code TYPE *.
02 newCustnum TYPE custnum.
end

DEFINITION getPartInfoReq.
02 request-code TYPE *.
02 partnum TYPE *.
end

DEFINITION getPartInfoReply.
02 reply-code TYPE *.
02 partsinfo TYPE *.
end

DEFINITION updatePartInfo.
02 request-code TYPE *.
02 partnum TYPE *.
02 change-inventory PIC S99.
end
